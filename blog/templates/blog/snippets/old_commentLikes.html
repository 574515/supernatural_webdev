<button class="btn btn-outline-danger btn-sm{% if not comment.approved %} d-none{% endif %}" type="submit" id="btnCommentLikes-{{ comment.id }}">
    <i class="fa-solid fa-heart" id="heartCommentDetail-{{ comment.id }}"></i>&nbsp;&nbsp;<span id="commNumLikes-{{ comment.id }}"></span>
</button>

{% if request.user.is_superuser or request.user == comment.author %}
<button class="btn btn-outline-danger" type="submit" id="btnCommentDelete-{{ comment.id }}">
    <i class="fa-solid fa-trash-can"></i>
</button>
{% include './ajaxDelete.html' %}
{% endif %}

<script>

    likeComment();

    function likeComment() {  

        let isInUsers, numOfLikes = "{{ comment.likes }}";
        "{% for user in comment.userlikes.all %}"
            "{{ request.user }}" == "{{ user }}" ? isInUsers = true : false;
        "{% endfor %}"
        
        $("#commNumLikes-{{ comment.id }}").html(numOfLikes);
        if (isInUsers) {
            $("#heartCommentDetail-{{ comment.id }}").addClass("fa-solid").removeClass("fa-regular");
            $("#commNumLikes-{{ comment.id }}").html(numOfLikes--);
        }
        else {
            $("#heartCommentDetail-{{ comment.id }}").addClass("fa-regular").removeClass("fa-solid");
            $("#commNumLikes-{{ comment.id }}").html(numOfLikes++);
        }

        $("#btnCommentLikes-{{ comment.id }}").click(function(e) {
            $.ajax({
                url: "{% url 'blog:commentlike' comment.post.id comment.id %}",
                type: "GET",
                data: {},
                cache: false,
                dataType: "json",
                success: function() {
                    isInUsers = !isInUsers;
                    if (isInUsers) {
                        $("#heartCommentDetail-{{ comment.id }}").addClass("fa-solid").removeClass("fa-regular");
                        $("#commNumLikes-{{ comment.id }}").html(numOfLikes--);
                    }
                    else {
                        $("#heartCommentDetail-{{ comment.id }}").addClass("fa-regular").removeClass("fa-solid");
                        $("#commNumLikes-{{ comment.id }}").html(numOfLikes++);
                    }
                },
                fail: function() {}
            });
        });
    }
</script>